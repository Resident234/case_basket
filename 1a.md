1a

Для демонстрации я записал видео ().

Условие задачи я интерпретировал так:
1) Сортируем все товары в корзине по возрастанию цены
2) Первым ceil(количество товаров в корзине / N) делаем стоимость Х

Используем обработчку событий.
Задействуется только один файл - handler.php , который через require_once подключён в init.php

Используется тандем из событий OnSaleBasketSaved модуля sale и OnGetOptimalPrice модуля catalog.

`$eventManager = \Bitrix\Main\EventManager::getInstance();
$eventManager->addEventHandler(
    'sale',
    'OnSaleBasketSaved',
    array('ChangeBasketClass', "OnSaleBasketSavedHandler")
);

$eventManager->addEventHandler(
    'catalog',
    'OnGetOptimalPrice',
    array('ChangeBasketClass', "OnGetOptimalPriceHandler")
);`




